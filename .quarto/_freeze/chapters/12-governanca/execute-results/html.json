{
  "hash": "c987dc9794a96d47475da40abc2d992d",
  "result": {
    "engine": "knitr",
    "markdown": "# Boas PrÃ¡ticas e GovernanÃ§a de Dados de ManutenÃ§Ã£o\n\n## IntroduÃ§Ã£o\n\nEstratÃ©gias para gestÃ£o eficaz de dados de manutenÃ§Ã£o, qualidade, versionamento e integraÃ§Ã£o.\n\n## Arquitetura de Dados de ManutenÃ§Ã£o\n\n### Camadas de Dados\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚     Camada de VisualizaÃ§Ã£o          â”‚  â† Dashboards, RelatÃ³rios\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚     Camada de Analytics             â”‚  â† Modelos ML, EstatÃ­stica\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚     Camada de IntegraÃ§Ã£o (ETL)      â”‚  â† Limpeza, TransformaÃ§Ã£o\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚     Camada de Armazenamento         â”‚  â† Data Lake, Data Warehouse\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚     Camada de Coleta                â”‚  â† CMMS, IoT, Sensores\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Fontes de Dados\n\n| Fonte | Tipo | FrequÃªncia | Exemplos |\n|-------|------|-----------|----------|\n| **CMMS** | Estruturado | ContÃ­nua | Ordens de serviÃ§o, histÃ³rico |\n| **Sensores IoT** | Time-series | Tempo real | Temperatura, vibraÃ§Ã£o |\n| **InspeÃ§Ãµes** | Semi-estruturado | PeriÃ³dica | Checklists, fotos |\n| **Manuais** | NÃ£o estruturado | EstÃ¡tica | PDFs, especificaÃ§Ãµes |\n\n## Qualidade de Dados\n\n### DimensÃµes de Qualidade\n\n1. **Completude** â€” Dados ausentes\n2. **AcurÃ¡cia** â€” Dados corretos\n3. **ConsistÃªncia** â€” Dados coerentes entre sistemas\n4. **Temporalidade** â€” Dados atualizados\n5. **Unicidade** â€” Sem duplicaÃ§Ã£o\n\n### VerificaÃ§Ã£o em R\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(naniar)\n\n# Carregar dados\nmanutencao <- read_csv(\"data/ordens_servico.csv\")\n\n# Verificar missing values\nvis_miss(manutencao)\n\n# EstatÃ­sticas de completude\nmiss_summary <- miss_var_summary(manutencao)\nprint(miss_summary)\n\n# Detectar duplicatas\nduplicatas <- manutencao %>%\n  group_by(ordem_id) %>%\n  filter(n() > 1)\n\ncat(\"Registros duplicados:\", nrow(duplicatas), \"\\n\")\n```\n:::\n\n\n\n\n\n\n### Limpeza de Dados\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pipeline de limpeza\nmanutencao_clean <- manutencao %>%\n  # Remover duplicatas\n  distinct(ordem_id, .keep_all = TRUE) %>%\n  # Tratar missings\n  mutate(\n    tempo_reparo = ifelse(is.na(tempo_reparo),\n                         median(tempo_reparo, na.rm = TRUE),\n                         tempo_reparo)\n  ) %>%\n  # Validar datas\n  filter(data_fim >= data_inicio) %>%\n  # Padronizar categorias\n  mutate(\n    tipo_manutencao = str_to_upper(tipo_manutencao),\n    tipo_manutencao = case_when(\n      tipo_manutencao %in% c(\"PREV\", \"PREVENTIVA\") ~ \"PREVENTIVA\",\n      tipo_manutencao %in% c(\"CORR\", \"CORRETIVA\") ~ \"CORRETIVA\",\n      TRUE ~ \"OUTRAS\"\n    )\n  )\n```\n:::\n\n\n\n\n\n\n## IntegraÃ§Ã£o de Dados\n\n### ETL com R\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DBI)\nlibrary(RSQLite)\n\n# ConexÃ£o com banco\ncon <- dbConnect(SQLite(), \"data/manutencao.db\")\n\n# Extract - Ler de mÃºltiplas fontes\ncmms_data <- read_csv(\"sources/cmms_export.csv\")\nsensor_data <- read_csv(\"sources/sensores.csv\")\ninspection_data <- read_excel(\"sources/inspecoes.xlsx\")\n\n# Transform - Limpar e integrar\ndados_integrados <- cmms_data %>%\n  left_join(sensor_data, by = c(\"equipamento_id\", \"data\")) %>%\n  left_join(inspection_data, by = \"equipamento_id\") %>%\n  # Engenharia de features\n  mutate(\n    tempo_desde_ultima_manutencao = as.numeric(data - lag(data)),\n    custo_acumulado = cumsum(custo)\n  )\n\n# Load - Carregar no banco\ndbWriteTable(con, \"manutencao_integrada\", dados_integrados, overwrite = TRUE)\n\ndbDisconnect(con)\n```\n:::\n\n\n\n\n\n\n## Versionamento de Dados\n\n### DVC (Data Version Control)\n\n```bash\n# Inicializar DVC\ndvc init\n\n# Adicionar dados ao DVC\ndvc add data/falhas_historicas.csv\n\n# Versionar com Git\ngit add data/falhas_historicas.csv.dvc .gitignore\ngit commit -m \"Adiciona dados histÃ³ricos v1.0\"\n\n# Push para remote storage (S3, Azure, etc.)\ndvc push\n```\n\n### Versionamento de Modelos\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pins)\n\n# Configurar board (local ou remoto)\nboard <- board_folder(\"models/\")\n\n# Salvar modelo com versÃ£o\npin_write(board, modelo_rf,\n          name = \"modelo_predicao_falhas\",\n          description = \"Random Forest v2.1 - AcurÃ¡cia 0.89\")\n\n# Carregar versÃ£o especÃ­fica\nmodelo_prod <- pin_read(board, \"modelo_predicao_falhas\",\n                        version = \"20250115T103045Z\")\n```\n:::\n\n\n\n\n\n\n## Pipelines Automatizados\n\n### Exemplo com {targets}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(targets)\n\n# _targets.R\nlist(\n  tar_target(dados_raw, read_csv(\"data/raw/ordens.csv\")),\n  tar_target(dados_clean, limpar_dados(dados_raw)),\n  tar_target(features, engenharia_features(dados_clean)),\n  tar_target(modelo, treinar_modelo(features)),\n  tar_target(metricas, avaliar_modelo(modelo, features)),\n  tar_target(relatorio, gerar_relatorio(metricas))\n)\n\n# Executar pipeline\ntar_make()\n\n# Visualizar dependÃªncias\ntar_visnetwork()\n```\n:::\n\n\n\n\n\n\n## IntegraÃ§Ã£o com CMMS\n\n### API REST\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(httr)\n\n# FunÃ§Ã£o para buscar ordens de serviÃ§o\nbuscar_os <- function(api_url, token, data_inicio, data_fim) {\n  response <- GET(\n    url = paste0(api_url, \"/workorders\"),\n    query = list(\n      start_date = data_inicio,\n      end_date = data_fim\n    ),\n    add_headers(Authorization = paste(\"Bearer\", token))\n  )\n\n  if (status_code(response) == 200) {\n    content(response, as = \"parsed\")\n  } else {\n    stop(\"Erro na API: \", status_code(response))\n  }\n}\n\n# Usar\nos_data <- buscar_os(\n  api_url = \"https://cmms.empresa.com/api\",\n  token = Sys.getenv(\"CMMS_TOKEN\"),\n  data_inicio = \"2024-01-01\",\n  data_fim = \"2024-12-31\"\n)\n```\n:::\n\n\n\n\n\n\n## IntegraÃ§Ã£o com IoT\n\n### MQTT para Sensores\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mqtt)\n\n# Conectar ao broker MQTT\nclient <- mqtt_connect(\"mqtt.empresa.com\", port = 1883)\n\n# Subscrever tÃ³pico\nmqtt_subscribe(client, \"sensores/temperatura/#\")\n\n# Callback para mensagens\nmqtt_on_message(client, function(topic, payload) {\n  dados_sensor <- jsonlite::fromJSON(payload)\n\n  # Processar e armazenar\n  processar_leitura_sensor(dados_sensor)\n})\n```\n:::\n\n\n\n\n\n\n## SeguranÃ§a e Compliance\n\n### Boas PrÃ¡ticas\n\n1. **AutenticaÃ§Ã£o e autorizaÃ§Ã£o**\n   - OAuth2 para APIs\n   - RBAC (Role-Based Access Control)\n\n2. **Criptografia**\n   - Dados em trÃ¢nsito (TLS)\n   - Dados em repouso (AES-256)\n\n3. **Auditoria**\n   - Logs de acesso\n   - Rastreabilidade de mudanÃ§as\n\n4. **Backup e recuperaÃ§Ã£o**\n   - Backups automÃ¡ticos diÃ¡rios\n   - Testes de recuperaÃ§Ã£o trimestrais\n\n### Exemplo de Auditoria\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nregistrar_auditoria <- function(usuario, acao, tabela, registro_id) {\n  log_entry <- data.frame(\n    timestamp = Sys.time(),\n    usuario = usuario,\n    acao = acao,\n    tabela = tabela,\n    registro_id = registro_id,\n    ip_address = Sys.getenv(\"REMOTE_ADDR\")\n  )\n\n  # Append ao log\n  write_csv(log_entry, \"logs/audit.csv\", append = TRUE)\n}\n```\n:::\n\n\n\n\n\n\n## Reprodutibilidade\n\n### Ambiente com {renv}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Inicializar renv\nrenv::init()\n\n# Salvar snapshot de pacotes\nrenv::snapshot()\n\n# Restaurar ambiente\nrenv::restore()\n```\n:::\n\n\n\n\n\n\n### ContainerizaÃ§Ã£o com Docker\n\n```dockerfile\n# Dockerfile\nFROM rocker/r-ver:4.5.1\n\n# Instalar dependÃªncias do sistema\nRUN apt-get update && apt-get install -y \\\n    libcurl4-openssl-dev \\\n    libssl-dev \\\n    libxml2-dev\n\n# Copiar projeto\nCOPY . /app\nWORKDIR /app\n\n# Instalar pacotes R\nRUN Rscript -e \"renv::restore()\"\n\n# Executar anÃ¡lise\nCMD [\"Rscript\", \"run_analysis.R\"]\n```\n\n## DocumentaÃ§Ã£o\n\n### Metadados\n\n```yaml\n# metadata.yml\ndataset:\n  name: \"HistÃ³rico de Falhas - Bombas\"\n  version: \"2.1\"\n  date: \"2025-01-15\"\n  owner: \"Engenharia de Confiabilidade\"\n  description: |\n    Dados de falhas de bombas centrÃ­fugas coletados\n    entre 2021-2024.\n\nfields:\n  - name: bomba_id\n    type: character\n    description: Identificador Ãºnico da bomba\n\n  - name: tempo_operacao\n    type: numeric\n    unit: horas\n    description: Tempo acumulado de operaÃ§Ã£o atÃ© falha ou censura\n```\n\n## ExercÃ­cios\n\nğŸ“ **ExercÃ­cio 1**: Implemente pipeline ETL para seus dados.\n\nğŸ“ **ExercÃ­cio 2**: Configure versionamento com DVC.\n\nğŸ“ **ExercÃ­cio 3**: Crie dashboard de qualidade de dados.\n\n## Resumo\n\nğŸ”” **Pontos-chave:**\n\n- GovernanÃ§a de dados Ã© fundamental para anÃ¡lises confiÃ¡veis\n- ETL automatizado reduz erros e retrabalho\n- Versionamento garante reprodutibilidade\n- IntegraÃ§Ã£o CMMS + IoT habilita manutenÃ§Ã£o inteligente\n- SeguranÃ§a e compliance sÃ£o inegociÃ¡veis\n\n---\n\n**PrÃ³ximo:** ApÃªndices\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}