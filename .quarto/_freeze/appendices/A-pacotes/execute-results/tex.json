{
  "hash": "cadd051ca41570036d86f25ca02b3247",
  "result": {
    "engine": "knitr",
    "markdown": "# Apêndice A: Pacotes e Funções Úteis em R {.unnumbered}\n\n## Pacotes Essenciais para Confiabilidade\n\n### Manipulação de Dados\n\n#### `tidyverse`\n\nColeção de pacotes para ciência de dados.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n# dplyr - manipulação\ndados %>%\n  filter(status == 1) %>%\n  mutate(tempo_dias = tempo / 24) %>%\n  group_by(tipo) %>%\n  summarise(mtbf = mean(tempo_dias))\n\n# ggplot2 - visualização\nggplot(dados, aes(x = tempo, y = confiabilidade)) +\n  geom_line() +\n  theme_minimal()\n```\n:::\n\n\n\n\n\n\n\n\n### Análise de Sobrevivência\n\n#### `survival`\n\nPacote padrão para análise de sobrevivência.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survival)\n\n# Criar objeto Surv\nsurv_obj <- Surv(time = tempo, event = status)\n\n# Kaplan-Meier\nkm_fit <- survfit(surv_obj ~ grupo)\n\n# Modelo Cox\ncox_model <- coxph(surv_obj ~ idade + temperatura, data = dados)\n```\n:::\n\n\n\n\n\n\n\n\n**Funções principais:**\n- `Surv()` - Criar objeto de sobrevivência\n- `survfit()` - Ajustar Kaplan-Meier\n- `coxph()` - Regressão de Cox\n- `survdiff()` - Teste log-rank\n\n#### `flexsurv`\n\nModelos paramétricos flexíveis.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(flexsurv)\n\n# Modelo Weibull AFT\nfit <- flexsurvreg(Surv(tempo, status) ~ temperatura,\n                   dist = \"weibull\")\n\n# Distribuições disponíveis:\n# \"weibull\", \"exp\", \"lnorm\", \"gamma\", \"gompertz\", etc.\n```\n:::\n\n\n\n\n\n\n\n\n#### `WeibullR`\n\nEspecializado em análise Weibull.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(WeibullR)\n\n# Criar objeto Weibull\nfit <- wblr(tempos, suspensoes = censuras)\n\n# Adicionar intervalos de confiança\nfit <- wblr.conf(fit)\n\n# Plotar papel de Weibull\nwblr.plot(fit)\n```\n:::\n\n\n\n\n\n\n\n\n### Ajuste de Distribuições\n\n#### `fitdistrplus`\n\nAjuste e diagnóstico de distribuições.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fitdistrplus)\n\n# Ajustar distribuição\nfit_weibull <- fitdist(dados, \"weibull\")\nfit_lnorm <- fitdist(dados, \"lnorm\")\n\n# Comparar ajustes\ngofstat(list(fit_weibull, fit_lnorm))\n\n# Plotar diagnósticos\nplot(fit_weibull)\n```\n:::\n\n\n\n\n\n\n\n\n### Machine Learning\n\n#### `caret`\n\nFramework unificado para ML.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(caret)\n\n# Treinar modelo\nmodelo <- train(falha ~ .,\n                data = treino,\n                method = \"rf\",\n                trControl = trainControl(method = \"cv\", number = 5))\n\n# Importância de variáveis\nvarImp(modelo)\n```\n:::\n\n\n\n\n\n\n\n\n**Métodos disponíveis:**\n- `\"rf\"` - Random Forest\n- `\"xgbTree\"` - XGBoost\n- `\"glm\"` - Regressão Logística\n- `\"svmRadial\"` - SVM\n\n#### `randomForest`\n\nImplementação específica de Random Forest.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(randomForest)\n\nmodelo <- randomForest(falha ~ .,\n                       data = treino,\n                       ntree = 500,\n                       importance = TRUE)\n\n# Matriz de confusão\npredict(modelo, teste)\n```\n:::\n\n\n\n\n\n\n\n\n### Séries Temporais\n\n#### `prophet`\n\nPrevisão de séries temporais (Facebook).\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(prophet)\n\n# Preparar dados (requer colunas 'ds' e 'y')\ndf <- data.frame(ds = datas, y = valores)\n\n# Ajustar modelo\nm <- prophet(df)\n\n# Previsão\nfuture <- make_future_dataframe(m, periods = 30)\nforecast <- predict(m, future)\n```\n:::\n\n\n\n\n\n\n\n\n#### `anomalize`\n\nDetecção de anomalias em séries temporais.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(anomalize)\n\ndados %>%\n  time_decompose(temperatura) %>%\n  anomalize(remainder) %>%\n  time_recompose() %>%\n  plot_anomalies()\n```\n:::\n\n\n\n\n\n\n\n\n### Visualização\n\n#### `survminer`\n\nVisualizações para análise de sobrevivência.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survminer)\n\n# Curva KM estilizada\nggsurvplot(km_fit,\n           conf.int = TRUE,\n           risk.table = TRUE,\n           pval = TRUE,\n           palette = \"jco\")\n```\n:::\n\n\n\n\n\n\n\n\n#### `plotly`\n\nGráficos interativos.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\n\n# Converter ggplot\np <- ggplot(dados, aes(x, y)) + geom_line()\nggplotly(p)\n\n# Plot direto\nplot_ly(dados, x = ~tempo, y = ~confiabilidade, type = \"scatter\", mode = \"lines\")\n```\n:::\n\n\n\n\n\n\n\n\n### Tabelas\n\n#### `kableExtra`\n\nTabelas estilizadas para relatórios.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(kableExtra)\n\ndados %>%\n  kable() %>%\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\")) %>%\n  row_spec(0, bold = TRUE, color = \"white\", background = \"steelblue\")\n```\n:::\n\n\n\n\n\n\n\n\n#### `DT`\n\nTabelas interativas.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DT)\n\ndatatable(dados,\n          filter = \"top\",\n          options = list(pageLength = 25))\n```\n:::\n\n\n\n\n\n\n\n\n### Simulação\n\n#### `simmer`\n\nSimulação de eventos discretos.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(simmer)\n\n# Criar ambiente de simulação\nenv <- simmer()\n\n# Definir trajetórias e recursos\n# ...\n\n# Executar simulação\nrun(env, until = 1000)\n```\n:::\n\n\n\n\n\n\n\n\n## Snippets Úteis\n\n### Calcular MTTF de Weibull\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmttf_weibull <- function(beta, eta) {\n  eta * gamma(1 + 1/beta)\n}\n```\n:::\n\n\n\n\n\n\n\n\n### Confiabilidade em Tempo t\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconfiabilidade_weibull <- function(t, beta, eta) {\n  exp(-(t/eta)^beta)\n}\n```\n:::\n\n\n\n\n\n\n\n\n### Bootstrap IC\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbootstrap_ci <- function(data, stat_fun, n_boot = 1000, conf = 0.95) {\n  boot_stats <- replicate(n_boot, {\n    sample_boot <- sample(data, replace = TRUE)\n    stat_fun(sample_boot)\n  })\n\n  alpha <- 1 - conf\n  quantile(boot_stats, c(alpha/2, 1 - alpha/2))\n}\n```\n:::\n\n\n\n\n\n\n\n\n### Plotar Taxa de Falha\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_hazard <- function(beta, eta, t_max = 1000) {\n  t <- seq(0, t_max, length.out = 200)\n  hazard <- (beta/eta) * (t/eta)^(beta - 1)\n\n  ggplot(data.frame(t, hazard), aes(t, hazard)) +\n    geom_line(color = \"steelblue\", linewidth = 1.2) +\n    labs(title = paste(\"Taxa de Falha (β =\", beta, \")\"),\n         x = \"Tempo\", y = \"λ(t)\") +\n    theme_minimal()\n}\n```\n:::\n\n\n\n\n\n\n\n\n## Instalação Rápida\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Todos os pacotes essenciais\ninstall.packages(c(\n  # Manipulação\n  \"tidyverse\", \"data.table\", \"lubridate\",\n\n  # Confiabilidade\n  \"survival\", \"flexsurv\", \"WeibullR\", \"reliability\",\n  \"fitdistrplus\",\n\n  # Machine Learning\n  \"caret\", \"randomForest\", \"xgboost\",\n\n  # Séries Temporais\n  \"prophet\", \"anomalize\", \"forecast\",\n\n  # Visualização\n  \"survminer\", \"plotly\", \"patchwork\",\n\n  # Tabelas\n  \"kableExtra\", \"DT\", \"gt\",\n\n  # Relatórios\n  \"knitr\", \"rmarkdown\", \"quarto\",\n\n  # Outros\n  \"broom\", \"here\", \"pins\"\n))\n```\n:::\n\n\n\n\n\n\n\n\n## Recursos Online\n\n- [CRAN Task View: Survival Analysis](https://cran.r-project.org/web/views/Survival.html)\n- [survival package vignette](https://cran.r-project.org/web/packages/survival/vignettes/survival.pdf)\n- [R for Data Science](https://r4ds.hadley.nz/)\n- [Posit Cheatsheets](https://posit.co/resources/cheatsheets/)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}